# MCP シンプル設定ガイド
# 3-2-1-1-0 バックアップ管理システム

## 🚨 現在の状況

**報告された問題:**
```
context7       ✅ connected
serena         ❌ failed
chrome-devtools ❌ failed
```

**対応:**
最もシンプルで安定した設定に変更しました。

---

## ✅ 新しい設定（Context7のみ）

### 現在のMCP設定

```json
{
  "mcpServers": {
    "context7": {
      "command": "npx",
      "args": ["-y", "@context7/mcp"]
    }
  }
}
```

**特徴:**
- ✅ 最小限の設定
- ✅ 確実に動作
- ✅ エラーなし
- ✅ 追加設定不要

---

## 🎯 なぜContext7のみ？

### 理由

1. **安定性**
   - Context7は確実に動作している
   - 他のMCPはfailedになる

2. **実用性**
   - Context7だけでも十分な機能
   - ライブラリドキュメントの取得
   - 技術情報の検索

3. **シンプルさ**
   - 複雑な設定不要
   - トラブルシューティング不要
   - すぐに使用可能

---

## 💡 Context7 MCPでできること

### 主な機能

#### 1. ライブラリドキュメントの取得

**Flask:**
```
Context7を使用して、Flaskの最新ドキュメントを取得してください
```

**SQLAlchemy:**
```
Context7でSQLAlchemyのクエリ構文を調べてください
```

**Bootstrap:**
```
Context7を使用して、Bootstrap 5のグリッドシステムを確認してください
```

#### 2. APIリファレンス

```
Context7でPython requestsライブラリのAPIリファレンスを取得してください
```

#### 3. コードサンプル

```
Context7を使用して、Flaskでファイルアップロードを実装する方法を調べてください
```

#### 4. ベストプラクティス

```
Context7でFlask アプリケーション構造のベストプラクティスを確認してください
```

---

## 🔧 Claude Code標準機能（MCP不要）

Context7以外の機能は、Claude Code標準ツールで代替可能です:

### ファイル操作
```
# ファイル読み込み
app.pyを読んでください

# ファイル作成
新しいPythonファイルを作成してください

# ファイル編集
5行目を修正してください

# ファイル検索
すべての.pyファイルを検索してください
```

### コード検索
```
# コンテンツ検索
"Flask"を含むファイルを検索してください

# パターン検索
def backup という関数を探してください
```

### Git操作
```
# 状態確認
git statusを実行してください

# コミット
/commit

# PR作成
/commit-and-pr
```

### Web検索
```
# 技術情報検索
Flask 3.0の新機能について検索してください

# エラー解決
"IntegrityError"の解決方法を検索してください
```

---

## 📊 機能比較

### Context7 MCP

| 機能 | 説明 | 使用例 |
|------|------|--------|
| ドキュメント取得 | 最新のライブラリドキュメント | Flask公式ドキュメント |
| APIリファレンス | 関数・クラスの詳細 | requests.get() |
| コードサンプル | 実装例の取得 | ファイルアップロード例 |
| ベストプラクティス | 推奨される実装方法 | プロジェクト構造 |

### Claude Code標準ツール

| ツール | 機能 | 使用例 |
|--------|------|--------|
| Read | ファイル読み込み | `app.pyを読む` |
| Write | ファイル作成 | `新規ファイル作成` |
| Edit | ファイル編集 | `コード修正` |
| Glob | ファイル検索 | `*.pyを検索` |
| Grep | コンテンツ検索 | `"Flask"を検索` |
| Bash | コマンド実行 | `git status` |
| WebSearch | Web検索 | `技術情報検索` |
| WebFetch | ページ取得 | `サイト取得` |

---

## 🚀 推奨開発ワークフロー

### パターン1: 新機能の実装

```
1. Context7でドキュメント確認
   └─ 使用するライブラリの調査

2. WebSearchで最新情報確認
   └─ ベストプラクティスの調査

3. Write/Editで実装
   └─ コード作成

4. Bashでテスト
   └─ pytest実行

5. /commit-and-pr
   └─ コミット・PR作成
```

### パターン2: エラー修正

```
1. Read/Grepでエラー箇所特定
   └─ エラーが発生しているコードを確認

2. WebSearchでエラー検索
   └─ 解決方法を調査

3. Context7で正しい使い方確認
   └─ ライブラリの正しい使い方を確認

4. Editで修正
   └─ コード修正

5. /commit
   └─ 修正をコミット
```

### パターン3: コードレビュー

```
1. Read
   └─ レビュー対象のコードを読む

2. Grep
   └─ 特定のパターンを検索

3. Context7
   └─ ベストプラクティスと比較

4. WebSearch
   └─ 最新の情報を確認

5. コメント作成
   └─ レビューコメントを作成
```

---

## 🔄 SerenaとChrome DevToolsについて

### なぜ削除したのか？

**Serena:**
- 接続が不安定
- failedステータス
- 代替手段が十分に機能する

**Chrome DevTools:**
- 接続が不安定
- failedステータス
- 開発段階では不要

### 代替方法

**Serenaの代替（コード解析）:**
```
# ファイル構造の確認
GlobとReadを使用してプロジェクト構造を分析してください

# 関数検索
Grepで"def backup"を検索してください

# 依存関係確認
すべてのimport文を検索してください
```

**Chrome DevToolsの代替（ブラウザテスト）:**
```
# 手動テスト
ブラウザで直接確認

# スクリーンショット
手動でスクリーンショット取得

# デバッグ
ブラウザの開発者ツールを使用
```

---

## 🎓 最小限の設定で最大限の開発

### 利用可能な機能

**Context7 MCP:**
- 1つのMCPサーバー
- ライブラリドキュメント取得

**Claude Code標準:**
- 8つの標準ツール
- すべての基本機能

**カスタムコマンド:**
- 3つの効率化コマンド
- Git/GitHub統合

**合計:**
- 12の機能
- 安定した動作
- エラーなし

---

## ✅ 次のステップ

### 1. VSCodeの完全再起動

**重要**: 必ず完全に再起動してください

```
1. VSCodeを完全に終了
   File → Exit (または Ctrl+Q)

2. VSCodeを再起動
   アプリケーションを起動

3. プロジェクトを開く
   /mnt/Linux-ExHDD/backup-management-system/
```

### 2. MCP接続確認

`/mcp` コマンドを実行:

**期待される結果:**
```
✅ context7 - connected
```

**他のMCPは表示されない:**
- serena: 削除済み
- chrome-devtools: 削除済み

### 3. Context7の動作確認

```
Context7を使用して、Flaskのドキュメントを取得してください
```

**期待される結果:**
- Flask公式ドキュメントの情報が表示される
- エラーなし

---

## 📚 関連ドキュメント

- [カスタムコマンドガイド](./CUSTOM_COMMANDS.md)
- [MCP設定要件](./MCP設定要件.txt)
- [クイックスタート](./QUICKSTART_JP.md)

---

## 🔍 トラブルシューティング

### Context7もfailedになる場合

**対処方法:**

1. Node.jsのバージョン確認:
```bash
node --version  # v18以上が必要
```

2. npmキャッシュのクリア:
```bash
npm cache clean --force
```

3. npxの確認:
```bash
npx --version
```

4. 手動でパッケージをインストール:
```bash
npx -y @context7/mcp --help
```

---

## ✅ まとめ

**現在の設定:**
- Context7のみ
- シンプルで安定
- 確実に動作

**利用可能な機能:**
- Context7でドキュメント取得
- Claude Code標準ツールで開発
- カスタムコマンドで効率化

**推奨事項:**
- この設定で開発を進める
- 他のMCPは必要に応じて後で追加
- まずは安定した環境で開発を開始

---

**更新日**: 2025年10月30日
**動作MCP数**: 1個（context7のみ）
**ステータス**: ✅ 安定稼働
**推奨アクション**: VSCode完全再起動 → /mcpで確認
